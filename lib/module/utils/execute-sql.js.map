{"version":3,"names":["sanitizeQueryResult","require","decodeQueryResult","executeSql","database","sql","params","console","log","isReadQuery","trim","toLowerCase","startsWith","sanitizedSql","replace","results","tableNameMatch","match","Error","tableName","_db","adapter","underlyingAdapter","_dispatcher","isSelectAll","test","isSelectCount","rawResult","queryAsArray","decoded","default","sanitized","schema","tables","collection","collections","get","modelInstances","_cache","recordsFromQueryResult","rows","map","model","_raw","columns","length","Object","keys","rewrittenSql","count","columnMatch","requestedColumns","split","c","allModelInstances","allRows","filteredRows","row","newRow","forEach","colName","prototype","hasOwnProperty","call","write","unsafeExecute","sqls"],"sourceRoot":"../../../src","sources":["utils/execute-sql.ts"],"mappings":"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","ignoreList":[]}
